#第十三节课
###1.分页存储管理基本原理
　　用分区方式管理存储器，每道程序要求占用内存的一个或多个连续存储区域，导致内存中产生“碎片”。有时为了接纳新作业，往往需要移动已在内存的消息，这样不仅不方便，而且处理器开销太大。

　　采用分页存储管理允许程序存放到若干不相邻的空闲块中，即可以免除移动信息工作，又可充分利用内存空间，消除动态分区法中的“碎片”问题，从而提高内存空间利用率。分页之后，页表逻辑上是连续的，物理上不联系。

###2.分页存储管理涉及的基本概念如下：
    （1）页面。进程逻辑地址空间分成大小相等的区，每个区称为页面或页，页号从0开始依次编号。
    （2）页框。页框又称页帧，把内存物理地址空间分成大小相等的区，其大小与页面大小相等，每个区是一个页框，块号从0开始依次编号。
    （3）逻辑地址。与此对应，分页存储器的逻辑地址由页号和页内位移两部分组成。
    （4）	内存页框表。该表长度取决于内存划分的物理块数，编号可与物理块号一致，页框表的表项给出物理块使用情况：0为空闲，1为占用。
    （5）	页表。页表是操作系统为进程建立的，是程序页面和内存页框的对照表，也表中的每一栏指明程序中的一个页面分的页框之间的对应关系。
###3.分段存储管理基本原理
分段存储管理的实现基于可变分区存储管理原理。可变分区以整个作业为单位来划分和连续存放，也就是说，作业在分区内是连续存放的，但独立作业之间不一定连续存放。而分段方法是以段为单位来划分和连续存放，为作业的各段分配一个连续内存空间，而各段之间不一定连续。在进行存储分配时，应为进入内存的作业建立段表，各段在内存中的情况可由段表来记录，他指出内存中各分段的段号、段起始地址和段长度。在撤销进程时，回收所占用的内存空间，并清除此进程的段表。
###4.分段和分页比较
　　分段是信息的逻辑单位，由源程序的逻辑结构及含义所决定，是用户可见的，段长由用户根据需要来确定，段起始地址可从任何内存地址开始。在分段方式中，源程序经链表装配后仍保持二维（地址）结构，引入目的是满足用户模块化程序设计的需要。

　　分页是信息的物理单位，与源程序的逻辑结构无关，是用户不可见的，页长由系统（硬件）确定，页面只能从页大小的整数倍地址开始。在分页方式中，源程序经链表装配后变成一维结构，引入目的是实现离散分配并提高内存利用率。

###5.内存放置练习
    Job　|	Size（kb） |　　Time units
     J1  |	500    　  |   	3
     J2  |	250        | 	4
     J3  |	200        | 	5
     J4	 |  350	       |     3
     J5	 |  60	       |     5
     J6	 |  300	       |    3
     J7	 |  400        |  	2
    定义
        合并空间：合并空间成为一个大的空间。
        存储紧缩：将内存占用的多个区域移动到一段连续的区域。
        假设主存1mb  分析上面7个作业的执行情况
     Os设计为：
        首次适应
        Cpu每单位时间进行一次作业交换
        Os运行合并时间并且花费一个单位时间
        Os每运行20个时间单位申请存储紧缩
        当新的作业放到内存首先执行
    完成7个作业花费的时间是多少？
   答：

    0：j1运行  占用空间500
    1：j2运行  占用空间750  
    2: j3运行  占用空间950   空闲50
    3：j1运行
    4：j2运行
    5：j3运行
    6：j1运行完毕  
    7：j4运行 占用350
    8：j5运行 占用60  空闲90
    9：j2运行
    10：j3运行
    11：j4运行
    12：j5运行
    13：j2运行完毕
    14：合并空间  空闲340
    15：j6运行 占用300  空闲40
    16：j3运行
    17：j4运行完毕
    18：j5运行
    19：j6运行
    20：内存紧缩
    21：内存紧缩
    22：内存紧缩
    23：内存紧缩  空闲440
    24：j7运行 占用400 空闲40
    25：j3运行完毕
    26：j5运行
    27：j6运行完毕
    28：合并空间  空闲340
    29：j7运行完毕
    30：合并空间  空闲600
    31：j5运行
    32：运行完成
    完成7个作业花费的时间是32

